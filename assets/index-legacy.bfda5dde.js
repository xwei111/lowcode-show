!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){l(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(t,n,l){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var l=t[Symbol.toPrimitive];if(void 0!==l){var o=l.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}System.register(["./index-legacy.de31069a.js","./index-legacy.0496e5cd.js","./router-legacy.bad15a34.js","./index-legacy.be4178af.js","./index-legacy.705ebdf9.js"],(function(e,t){"use strict";var l,o,i,a,r,d,s,u,c,p,f,v,b,m,g=document.createElement("style");return g.textContent=".footer[data-v-3937ff43]{display:flex;justify-content:flex-end}.fotter[data-v-1ea4ea24],.fotter[data-v-e51f9ddc]{display:flex;justify-content:flex-end;padding-top:20px}.data_content[data-v-d829cb8f]{width:calc(100% - 48px);height:100%}.data_content .data_header[data-v-d829cb8f]{width:100%;height:48px;box-sizing:border-box;padding:0 20px;display:flex;align-items:center;border-bottom:1px solid rgb(227,230,235);background-color:#fff;font-size:16px;font-weight:600}.data_content .data_wraper[data-v-d829cb8f]{height:calc(100% - 48px);box-sizing:border-box;padding:20px;background:#fff}.data_content .data_operate[data-v-d829cb8f]{display:flex;justify-content:flex-end;margin-bottom:20px}\n",document.head.appendChild(g),{setters:[function(e){l=e.n,o=e.r,i=e.w,a=e.f,r=e.t,d=e.m,s=e.u,u=e.k},function(e){c=e.T},function(e){p=e.g},function(e){f=e.a},function(e){v=e.F,b=e.u,m=e.C}],execute:function(){var t={field:[{required:!0,message:"请输入字段名",trigger:"blur"}],fn:[{required:!0,message:"请输入方法名",trigger:"blur"}]},g={field:void 0,fn:void 0,url:void 0,method:void 0,pageId:void 0,init:"0"},y=[{label:"字段",type:"input",prop:"field",clearable:!0},{label:"方法名",type:"input",prop:"fn",clearable:!0},{label:"接口地址",type:"input",prop:"url",clearable:!0},{label:"请求方式",type:"select",prop:"method",options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"}],clearable:!0},{label:"页面标记",type:"select",prop:"pageId",options:[],clearable:!0},{label:"项目初始化触发",type:"select",prop:"init",options:[{value:"0",label:"否"},{value:"1",label:"是"}]}],h={props:{projectId:[String,Number],visible:Boolean,detail:Object,pageOptions:Array},components:{Form:v},setup:function(e,l){var d=l.emit,s=f.dataApis,u=s.addDataSystem,c=s.updateDataSystem,p=o(),v=o(!1),m=b({formRef:p,formData:g,formConfig:y}),h=function(){d("closeHandle"),m.resetHandle()};i((function(){return e.visible}),(function(t){var n;(v.value=t,t&&e.detail)&&(m.loopFormData((function(t,n){var l,o,i;t[n]="method"===n?(null===(l=e.detail)||void 0===l?void 0:l.method)||"GET":"init"===n?(null===(o=e.detail)||void 0===o?void 0:o.init)||"0":null===(i=e.detail)||void 0===i?void 0:i[n]})),m.setConfig("pageId","options",null===(n=e.pageOptions)||void 0===n?void 0:n.map((function(e){return{value:e.id,label:"".concat(e.name,"(").concat(e.code,")")}}))))}));var _=a({formApis:m});return n({formRef:p,formRules:t,dialogVisible:v,onSubmit:function(){m.submitHandle((function(){var t=e.projectId,l=e.detail,o=(null!=l?l:{}).id;o?c(o,m.formData).then((function(e){e&&d("successHandle"),h()})):u(n({projectId:t},m.formData)).then((function(e){e&&d("successHandle"),h()}))}))},closeHandle:h},r(_))}},_=l(h,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"配置数据",top:"20px",width:"40%",visible:e.dialogVisible,"before-close":e.closeHandle},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("Form",{ref:"formRef",attrs:{inline:!1,formConfig:e.formApis.formConfig,formData:e.formApis.formData,formRules:e.formRules}}),t("div",{staticClass:"footer"},[t("el-button",{on:{click:e.closeHandle}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")])],1)],1)}),[],!1,null,"3937ff43",null,null).exports,x={components:{CodeEdit:m},props:{visible:Boolean,detail:Object},setup:function(e,t){var n=t.emit,l=f.dataApis.updateDataSystem,a=o(),r=o(!1),s=d().run,u=function(){var e;null===(e=a.value)||void 0===e||null===(e=e.monacoEditor)||void 0===e||e.setValue(""),n("closeHandle")};return i((function(){return e.visible}),(function(t){r.value=t,t&&s((function(){var t,n,l;return null===(t=a.value)||void 0===t||null===(t=t.monacoEditor)||void 0===t?void 0:t.setValue(null!==(n=null===(l=e.detail)||void 0===l?void 0:l.callback)&&void 0!==n?n:"")}),0)})),{jsRef:a,dialogVisible:r,closeHandle:u,submitHandle:function(){var t,o,i,r=null!==(t=null===(o=a.value)||void 0===o||null===(o=o.monacoEditor)||void 0===o?void 0:o.getValue())&&void 0!==t?t:"";l(null===(i=e.detail)||void 0===i?void 0:i.id,{callback:r}).then((function(e){n("successHandle"),u()}))}}}},j=l(x,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"自定义Callback",top:"20px",width:"60%",visible:e.dialogVisible,"before-close":e.closeHandle},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("code-edit",{ref:"jsRef",staticStyle:{width:"100%",height:"300px"}}),t("div",{staticClass:"fotter"},[t("el-button",{on:{click:e.closeHandle}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitHandle}},[e._v("保存")])],1)],1)}),[],!1,null,"1ea4ea24",null,null).exports,H={components:{CodeEdit:m},props:{visible:Boolean,detail:Object},setup:function(e,t){var n=t.emit,l=f.dataApis.updateDataSystem,a=o(),r=o(!1),s=d().run,u=function(){var e;null===(e=a.value)||void 0===e||null===(e=e.monacoEditor)||void 0===e||e.setValue(""),n("closeHandle")};return i((function(){return e.visible}),(function(t){r.value=t,t&&s((function(){var t,n,l;return null===(t=a.value)||void 0===t||null===(t=t.monacoEditor)||void 0===t?void 0:t.setValue(null!==(n=null===(l=e.detail)||void 0===l?void 0:l.params)&&void 0!==n?n:"")}),0)})),{jsRef:a,dialogVisible:r,closeHandle:u,submitHandle:function(){var t,o,i,r=null!==(t=null===(o=a.value)||void 0===o||null===(o=o.monacoEditor)||void 0===o?void 0:o.getValue())&&void 0!==t?t:"";l(null===(i=e.detail)||void 0===i?void 0:i.id,{params:r}).then((function(e){n("successHandle"),u()}))}}}},S=l(H,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"入参",top:"20px",width:"60%",visible:e.dialogVisible,"before-close":e.closeHandle},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("code-edit",{ref:"jsRef",staticStyle:{width:"100%",height:"300px"}}),t("div",{staticClass:"fotter"},[t("el-button",{on:{click:e.closeHandle}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitHandle}},[e._v("保存")])],1)],1)}),[],!1,null,"e51f9ddc",null,null).exports,O=[{prop:"field",label:"字段名"},{prop:"loading",label:"加载状态"},{prop:"fn",label:"方法名"},{prop:"url",label:"接口地址"},{prop:"method",label:"请求方式"},{prop:"pageId",label:"页面标记"},{prop:"params",label:"入参"},{prop:"callback",label:"回调/方法"},{prop:"init",label:"项目初始化触发"},{prop:"operate",label:"操作"}];e("default",l({components:{Modal:_,Edit:j,Params:S,Table:c},setup:function(){var e=s(),t=p().projectId,l=f.dataApis,i=l.getDataSystem,d=l.delteDataSystem,c=l.getPages,v=o([]),b=o([]),m=u(),g=u(),y=u();c({projectId:t}).then((function(e){b.value=null!=e?e:[]}));var h=function(){i({projectId:t}).then((function(t){v.value=null!=t?t:[],e.setConfigs(v.value)}))};h();var _=a({modalApis:m,editApis:g,paramsApis:y});return n({projectId:t,store:e,columns:O,tableData:v,pageOptions:b,getSystem:h,getPage:function(e){var t,n,l=null!==(t=null===(n=b.value)||void 0===n?void 0:n.find((function(t){return t.id===e})))&&void 0!==t?t:null;return l?"".concat(null==l?void 0:l.name,"(").concat(null==l?void 0:l.code,")"):"- -"},deleteHandle:function(e){d(e.id).then((function(){return h()}))}},r(_))}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"data_content"},[t("div",{staticClass:"data_header"},[e._v("数据配置")]),t("div",{staticClass:"data_wraper"},[t("div",{staticClass:"data_operate"},[t("el-button",{attrs:{type:"primary"},on:{click:function(){return e.modalApis.openHandle({})}}},[e._v("新增")])],1),t("Table",{attrs:{data:e.tableData,columns:e.columns},scopedSlots:e._u([{key:"loading",fn:function(n){var l=n.row;return[t("span",[e._v(e._s(l.field)+"loading")])]}},{key:"callback",fn:function(n){var l=n.row;return[t("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(l.callback?"已存在":"无"))]),t("el-button",{attrs:{type:"text"},on:{click:function(){return e.editApis.openHandle(l)}}},[e._v("前往自定义")])]}},{key:"params",fn:function(n){var l=n.row;return[t("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(l.params?"已存在":"无"))]),t("el-button",{attrs:{type:"text"},on:{click:function(){return e.paramsApis.openHandle(l)}}},[e._v("编辑")])]}},{key:"pageId",fn:function(n){var l=n.row;return[t("span",[e._v(e._s(e.getPage(l.pageId)))])]}},{key:"init",fn:function(n){var l=n.row;return[t("span",[e._v(e._s("1"===l.init?"是":"否"))])]}},{key:"operate",fn:function(n){var l=n.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(){return e.modalApis.openHandle(l)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteHandle(l)}}},[e._v("删除")])]}}])})],1),t("Modal",{attrs:{projectId:e.projectId,visible:e.modalApis.visible,detail:e.modalApis.detail,pageOptions:e.pageOptions},on:{closeHandle:e.modalApis.closeHandle,successHandle:function(){return e.getSystem()}}}),t("Edit",{attrs:{visible:e.editApis.visible,detail:e.editApis.detail},on:{closeHandle:e.editApis.closeHandle,successHandle:function(){return e.getSystem()}}}),t("Params",{attrs:{visible:e.paramsApis.visible,detail:e.paramsApis.detail},on:{closeHandle:e.paramsApis.closeHandle,successHandle:function(){return e.getSystem()}}})],1)}),[],!1,null,"d829cb8f",null,null).exports)}}}))}();
