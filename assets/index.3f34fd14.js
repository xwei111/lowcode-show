import{n as C,r as x,e as c}from"./index.2d473fb6.js";import{a as h}from"./index.b06e3bcc.js";import{T as y}from"./index.f92c4109.js";import{g as H}from"./router.05a83631.js";const M=[{prop:"name",label:"\u5916\u90E8\u8D44\u6E90\u540D\u79F0"},{prop:"url",label:"\u5916\u90E8\u8D44\u6E90\u94FE\u63A5"},{prop:"type",label:"\u5916\u90E8\u8D44\u6E90\u7C7B\u578B"},{prop:"operate",label:"\u64CD\u4F5C"}];const z={components:{Table:y},setup(){const{addExternals:r,deleteExternals:e,getExternals:s}=h.dataApis,{projectId:a}=H(),l=x(),d=x(),g=/^((http|https):\/\/)?(([A-Za-z0-9]+-[A-Za-z0-9]+|[A-Za-z0-9]+)\.)+([A-Za-z]+)[/\?\:]?.*$/,u=()=>{s({projectId:a}).then(t=>{d.value=t!=null?t:[]})};u();const p=(t,_)=>{var n;return(n=d.value)==null?void 0:n.find(o=>o[t]===_)};return{url:l,list:d,columns:M,addHandle:()=>{var v,f,m;if(!l.value)return c.exports.Message("\u8BF7\u8F93\u5165\u5730\u5740");if(!g.test(l.value))return c.exports.Message.warning("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5730\u5740");if(p("url",l.value))return c.exports.Message.warning("\u8D44\u6E90\u5DF2\u5B58\u5728");const t=(f=(v=l.value)==null?void 0:v.split("/"))!=null?f:[],_=t==null?void 0:t.length,n=t[_-1];if(!n)return c.exports.Message.warning("\u7F3A\u5931\u8D44\u6E90\u540D\u79F0");if(p("name",n))return c.exports.Message.warning("\u8D44\u6E90\u540D\u79F0\u91CD\u590D\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u5B58\u5728\u4E0D\u540C\u7248\u672C\u8D44\u6E90");const o=(m=n==null?void 0:n.split("."))!=null?m:[],b=o==null?void 0:o.length,i=o[b-1];if(i!=="js"&&i!=="css"||!i)return c.exports.Message.warning("\u4E0D\u652F\u6301\u975EJs/Css\u8D44\u6E90");r({projectId:a,url:l.value,type:i,name:n}).then(()=>{l.value=null,u()})},deleteHandle:t=>{e(t==null?void 0:t.id).then(()=>u())}}}};var A=function(){var e=this,s=e._self._c;return s("div",{staticClass:"externals_content"},[e._m(0),s("div",{staticClass:"externals_main"},[s("div",{staticClass:"externals_adds"},[s("el-input",{staticClass:"externals_ipt",attrs:{placeholder:"\u8BF7\u8F93\u5165\u5916\u90E8\u8D44\u6E90\u5730\u5740"},model:{value:e.url,callback:function(a){e.url=typeof a=="string"?a.trim():a},expression:"url"}}),s("div",{staticClass:"externals_add",on:{click:e.addHandle}},[e._v("\u6DFB\u52A0")])],1)]),s("div",{staticClass:"externals_tables"},[s("Table",{attrs:{data:e.list,columns:e.columns,border:""},scopedSlots:e._u([{key:"operate",fn:function({row:a}){return[s("el-button",{attrs:{type:"text"},on:{click:function(l){return e.deleteHandle(a)}}},[e._v("\u5220\u9664")])]}}])})],1)])},k=[function(){var r=this,e=r._self._c;return e("div",{staticClass:"externals_header"},[e("div",{staticClass:"externals_title"},[r._v("\u52A0\u8F7D\u5916\u90E8\u8D44\u6E90(JS/CSS)")]),e("div",{staticClass:"externals_desc"},[r._v(" \u5E94\u7528\u521D\u59CB\u5316\u65F6\u9ED8\u8BA4\u52A0\u8F7D\u8BE5\u8D44\u6E90\uFF0C\u53EF\u5728\u201C\u4EE3\u7801\u7F16\u8F91\u5668\u201D\u4E2D\u8C03\u7528\u8BE5\u8D44\u6E90 ")])])}],E=C(z,A,k,!1,null,"345568cb",null,null);const w=E.exports;export{w as default};
