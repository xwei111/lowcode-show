import{r as g,u as k,c as y,d as C,a as d,n as m,o as $,f as A,t as x,g as j}from"./index.a6f29f43.js";import{a as H}from"./index.50108349.js";import{g as w}from"./router.500fcc20.js";import{u as I}from"./useStore.b2f53153.js";import{_ as P}from"./logo.92a05ead.js";const R=()=>{const{on:a}=y("updateProjectTitle"),s=g([]),e=g(),c=g(!1),{projectId:o}=w(),n=k(),r=I(),{getProjects:_,getDataSystem:v}=H.dataApis,b=()=>{C(()=>{var i,u;const t=(u=(i=s.value)==null?void 0:i.find(S=>S.id===e.value))!=null?u:{};t.name=(t==null?void 0:t.name)==="\u81EA\u5B9A\u4E49\u5E94\u7528"?`${t==null?void 0:t.name}_${t.id}`:t.name,r.setProjectInfo(t!=null?t:{})})},h=t=>{if(t.id===e.value)return;e.value=t==null?void 0:t.id,p(!1);const{origin:i,pathname:u}=window.location;window.location.href=`${i}${u}?projectId=${t.id}`},p=t=>c.value=t,f=()=>{_().then(t=>{s.value=t!=null?t:[],b()})};return(t=>{e.value=t,n.setProjectName(t),v({projectId:o}).then(i=>i&&n.setConfigs(i!=null?i:[])),f()})(o),a(()=>{f()}),{active:e,list:s,show:c,changeShow:p,listHandle:h}},T="/lowcode-show/assets/config.e8703b76.svg",q="/lowcode-show/assets/configSelect.135a1727.svg",N="/lowcode-show/assets/data.b418b183.svg",D="/lowcode-show/assets/dataSelect.dd45f2b7.svg",E="/lowcode-show/assets/logo.c543e827.svg",F="/lowcode-show/assets/page.680458f7.svg",L="/lowcode-show/assets/pageSelect.f4941896.svg",M="/lowcode-show/assets/resource.e37bb808.svg",O="/lowcode-show/assets/resourceSelect.5487f3ed.svg",l=a=>new URL(Object.assign({"../../../assets/img/config.svg":T,"../../../assets/img/configSelect.svg":q,"../../../assets/img/data.svg":N,"../../../assets/img/dataSelect.svg":D,"../../../assets/img/logo.svg":E,"../../../assets/img/page.svg":F,"../../../assets/img/pageSelect.svg":L,"../../../assets/img/resource.svg":M,"../../../assets/img/resourceSelect.svg":O})[`../../../assets/img/${a}.svg`],self.location).href,z=[{tip:"\u9875\u9762\u8BBE\u8BA1",key:"editor",ig:l("page"),igs:l("pageSelect")},{tip:"\u6570\u636E\u914D\u7F6E",key:"data",ig:l("data"),igs:l("dataSelect")},{tip:"\u8D44\u6E90\u914D\u7F6E",key:"resource",ig:l("resource"),igs:l("resourceSelect")},{tip:"\u5E94\u7528\u914D\u7F6E",key:"config",ig:l("config"),igs:l("configSelect")}],B=()=>{const{history:{current:{name:a,meta:{parent:s}}}}=d,e=g(s||a||"editor"),c=o=>{if(o===e.value)return;const{projectId:n,pageId:r}=w();d.push({name:o,query:{projectId:n,pageId:r}})};return d.beforeEach((o,n,r)=>{const{meta:_,name:v}=o;e.value=(_==null?void 0:_.parent)||v,r()}),{active:e,configs:z,selectHandle:c}};const U={setup(){const a=g(null),s=R(),e=B();$(a,n=>{var _;const{className:r}=(_=n==null?void 0:n.target)!=null?_:{};r.includes("m_i_g")||s.changeShow(!1)});const c=()=>{d.push({name:"lowcode"})},o=A({listApis:s,selectApis:e});return{target:a,backHandle:c,...x(o)}}};var G=function(){var s=this,e=s._self._c;return e("div",{staticClass:"menu_content"},[e("div",{staticClass:"menu_wraper m_i_g",on:{click:()=>s.listApis.changeShow(!s.listApis.show)}},[e("img",{staticClass:"menu_logo m_i_g",attrs:{src:P}})]),e("div",s._l(s.selectApis.configs,function(c,o){return e("div",{key:o,staticClass:"menu_list"},[e("div",{staticClass:"menu_box",class:s.selectApis.active===c.key?"menu_box-select":"",on:{click:function(n){return s.selectApis.selectHandle(c.key)}}},[s.selectApis.active===c.key?e("img",{staticClass:"menu_ig",attrs:{src:c.igs}}):e("img",{staticClass:"menu_ig",attrs:{src:c.ig}}),e("span",{staticClass:"menu_text"},[s._v(s._s(c.tip))])])])}),0),s.listApis.show?e("div",{ref:"target",staticClass:"menu_projects"},[s._l(s.listApis.list,function(c,o){return e("div",{key:o,staticClass:"menu_list",class:s.listApis.active===c.id?"menu_list-select":"",on:{click:()=>s.listApis.listHandle(c)}},[e("i",{staticClass:"el-icon-folder"}),e("span",{staticClass:"menu_projectName"},[s._v(s._s((c==null?void 0:c.name)==="\u81EA\u5B9A\u4E49\u5E94\u7528"?`${c==null?void 0:c.name}_${c.id}`:c.name))])])}),e("div",{staticClass:"menu_back",on:{click:s.backHandle}},[s._v("\u8FD4\u56DE\u4E3B\u9875")])],2):s._e()])},J=[],K=m(U,G,J,!1,null,"88a164d9",null,null);const Q=K.exports;const V={components:{Menu:Q},setup(){const{setType:a}=j();a("pc")}};var W=function(){var s=this,e=s._self._c;return e("div",{staticClass:"core_content"},[e("Menu"),e("router-view")],1)},X=[],Y=m(V,W,X,!1,null,"6be609b2",null,null);const as=Y.exports;export{as as default};
